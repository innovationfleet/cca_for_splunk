               ____ ____    _       __              ____        _             _
              / ___/ ___|  / \     / _| ___  _ __  / ___| _ __ | |_   _ _ __ | | __
             | |  | |     / _ \   | |_ / _ \| '__| \___ \| '_ \| | | | | '_ \| |/ /
             | |__| |___ / ___ \  |  _| (_) | |     ___) | |_) | | |_| | | | |   <
              \____\____/_/   \_\ |_|  \___/|_|    |____/| .__/|_|\__,_|_| |_|_|\_\
                                                         |_|


    CCA for Splunk's user interface is a helper function that assists in creating and execute the
    ansible-playbook commands for a give playbook and host selection. It gives full control
    to see and select target hosts. Each ansible playbook has a set of configurable arguments,
    on the page with extra vars, additional variables are listed with their default values.

    You will be guided through playbook selection, host limits and options to configure the
    additional variables.

    Whiptail Help:
     Tab key:   Move between fields
     Spacebar:  Select/unselect item
     Arrow key: Move up/down in list or scroll text
     Enter:     Continue

    Usage:  cca_ctrl [-d|--debug] [-c|--check] [-s|--setup] [-h|--help]
            CCA for Splunk is a toolset used to automate infrastructure
            and onboarding tasks using Ansible.

            -d,--debug  Enable script debug
            -c,--check  Configures Ansible to run in check mode
            -s,--setup  Guided setup wizard to initially setup or upgrade CCA for Splunk
            -h,--help   Print usage

    Release notes:

    2025.2.2
              - ⚠️ REQUIRED ANSIBLE UPDATE ⚠️
                Ansible 2.18.6+ is required to run CCA from this release and onwards.
                Run ./cca_ctrl --upgrade from your CCA main repository and select the playbook
                'upgrade_cca_manager.yml'. When the upgrade is complete, log out and log in again.
                Your shell prompt (PS1) should now indicate that 'ansible2.18' is the active virtual environment.
              - Important:
                 * Copy settings from the infrastructure group_vars/all/general_settings template directory.
                   An option to disable a non-documented prometheus setting that is know to cause memory leak
                   issues on especially forwarders. CCA will disable on all hosts.
                 * This version of CCA deprecates OS versions incompatible with Ansible 2.17+. To proceed
                   with deprecated OS versions, set `"cca_accept_deprecated_os": true` when running the
                   configure_linux_servers playbook.
                 * CCA has solved the breaking changes in Ansible, by using shell fallback for deprecated OS
                   versions.
                 * Support for Enterprise Linux version 7 and Amazon Linux 2 has been removed.
              - Bumped Splunk Enterprise version to 9.4.3, Splunk 9.4.x track is recommended for production usage.
              - Added Ubuntu 24.04 support.
                * Important: Update your infrastructure group_vars/all/linux file using the
                  reference from templates/infrastructure_template/ENVIRONMENT_NAME/group_vars/all/linux.
                  It has added handling for OS package differences between dnf and apt package managers.
              - Enhanced stability with ansible retry on all relevant Splunk commands. High load scenarios
                will be gracefully retried and fail only after a configurable retry with proper default
                values.
              - Introduced rescue for Index Cluster pre-flight check, after the timeout, Splunkd is restarted
                and pre-flight is checked again.
              - Added command timeout for all command tasks.
              - Added command timeout and pipefail to all shell tasks.
              - Updated logic to control when to upgrade Splunk, moved functionality from playbook to tasks.
              - Improved cgroups handling for kernels that support cgroups v2 but Splunk Enterprise
                is less than 9.4.
              - Playbook merge and updated with optional variables for onboarding directory references.
              - Complete overhaul, handled all ansible-lint issues in tasks and playbooks. Changed shell to
                command module where it's not required. Added /bin/bash as executable for shell module that
                is required on ubuntu servers.
              - Added a more robust cleanup of temp files on the CCA Manager server.


              Bug fixes:
                * Removed vars cca_splunk_enterprise_upgrade: true from rolling upgrade
                  playbook as it overruled the default "false" and always triggered an upgrade.
                * Fixed cgroups and Splunk version logic that prevented Systemd to be correctly configured on
                  legacy hosts and Splunk Enterprise 9.4.
                * Changed strict x509 certificate validation assessment to only run when
                  splunk_enterprise_version is set to 9.4.0+.
                * cca.core.linux: Fix reboot handler in selinux reconfiguration scenario.

    2025.1.1.1
              Bug fixes:
                * Corrected destination path for app deployment after migration to ansible synchronize module.

    2025.1.1
              - Important:
                 * This version of CCA deprecates OS versions incompatible with Ansible 2.17+. To proceed
                   with deprecated OS versions, set `"cca_accept_deprecated_os": true` when running the
                   configure_linux_servers playbook.
              - Bumped Splunk Enterprise version to 9.3.3, Splunk 9.3.x track is recommended for production usage.
              - Introduced template support for web security headers. Copy settings from the infrastructure
                group_vars/all/general_settings templates applicable to all non-search head members. For
                search head members, use group_vars/searchhead_deployer_shcluster_cX. Review the settings
                and enable by setting `enable_web_security_headers=true` or
                `enable_web_security_headers_searchhead_members=true` in the appropriate inventory group.
              - Updated CCA to support Splunk versions 9.1.8, 9.2.5, 9.3.3, 9.4.0, and 9.4.1. These versions
                address the high CVE: https://advisory.splunk.com/advisories/SVD-2025-0301
              - Updated support for the new `.tgz` file naming format for Splunk Enterprise installation files.
              - Updated Splunk Enterprise download validation to use SHA512 checksums.

              - Important 9.4 Upgrade Information:
                 * Ensure you meet the required prerequisites for the KVStore upgrade in Splunk 9.4+.
                   Verify that your cca_splunk_extension_cert_rootca includes your Root CA and all
                   Intermediate CAs, and is deployed before upgrading to Splunk Enterprise 9.4.
                 * The setting `sslRootCAPath` has been added to the certificate configuration in
                   server.conf. Update your infrastructure group_vars/all/general_settings using the
                   reference from templates/infrastructure_template/ENVIRONMENT_NAME/group_vars/all/general_settings.
                 * Use the manage_* playbooks in check_mode to validate your certificates. Alternatively,
                   copy the cert-inspect.sh script from templates/infrastructure_template/splunk/etc/auth/certs
                   to your infrastructure directory and validate your certificates before deployment.
              - Full support for cgroups version 2. The upgrade is performed automatically when running
                the configure_linux_servers.yml playbooks after upgrading to Splunk 9.4+.
              - Added automatic handling of KVStore upgrades introduced in 9.4. The playbook will now
                wait until the KVStore upgrade is completed. This process takes time as kvstore is upgraded
                by splunk 3 times in the background. Do not set shc_upgrade_kvstore_engine to true for 9.4
                upgrades.
              - Added KVStore version check before upgrading to Splunk Enterprise 9.4+. This corrects a
                bug in Splunk when a initial version was installed with engine version 4.2.
              - Added strict X.509 certificate validation as part of the upgrade pre-check to avoid
                post-upgrade issues.
              - Added new internal deployment server indexes to cluster_manager_cluster_cX. Replace your
                existing infrastructure group_vars/cluster_manager_cluster_c1 with the version from
                templates/infrastructure_template/ENVIRONMENT_NAME/group_vars/cluster_manager_cluster_c1.
              - Improved the stability of the Splunk `offline` command on index peers. If a timeout occurs,
                the system now performs a `splunk stop` as fallback.
              - Improved Splunk Version handling during server reboot and cgroups configuration updates.

              Bug Fixes:
                - Corrected splunk_conf_host_settings that was incorrectly referring splunk_conf_group_settings.
                - Corrected syntax reference of file stat results in conditionals.
                - Corrected incorrect case on state variables.


    2024.3.1
              - Important:
                 * Replace your own copy of infrastructure group_vars/all/general_settings from
                   templates/infrastructure_template/ENVIRONMENT_NAME/group_vars/all/general_settings
                   It has an important fix for the following vulnerability, handles all supported versions
                   automatically. It applies to all hosts except Cluster Peers and Search Head Members.
                    Sensitive Information Disclosure through SPL commands
                    Advisory ID: SVD-2024-1204 CVE ID: CVE-2024-53246
                 * Update your group_vars for infrastructure cluster_manager_cluster_c* and
                   searchhead_deployer_shcluster_c* with files from
                   templates/infrastructure_template/ENVIRONMENT_NAME/group_vars/
                   They has the important fix for the following vulnerability, handles all supported versions
                   automatically and targets Cluster Peers and Search Head Members explicitly.
                    Sensitive Information Disclosure through SPL commands
                    Advisory ID: SVD-2024-1204 CVE ID: CVE-2024-53246
                 * All manage_* playbooks needs to be executed to update the settings on respective host.
                 * Replace your own copy of onboarding group_vars/all/onboarding with the file in
                   templates/onboarding_template/ENVIRONMENT_NAME/group_vars/ to handle the new default
                   splunk_ingest_actions app that was introduced in Splunk Enterprise 9.3
              - Bumped Splunk Enterprise version to 9.2.4, Splunk 9.2.x track is recommended for production usage.
              - Syntax update in playbooks and tasks to fix deprecation warnings in future
                ansible versions.
              - Changed all become_user conditions to use "{{ splunk_user }}"
              - CCA Supports co-locating the CCA manager on a Splunk Server. For playbooks that
                issue a Server reboot, it will be suppressed if a manager is co-located. For that
                server, a reboot must be dealt with manually.
              - Updated diff files for post upgrade cleanup.
              - Updated .gitignore with new Splunks internal files.

              Bug Fixes:
                - Corrected condition in sever_reboot_handler to allow full control over

    2024.2.2.3 (Hot fixes for Premium Customers Only)
              Bug Fixes:
                - Corrected standalone restart handler for Onboarding logic of Deploy Apps.

    2024.2.2.2 (Hot fixes for Premium Customers Only)
              - Added wait for host connection in configure_linux_servers.yml playbook.

              Bug Fixes:
                - Corrected state variable name for running kernel cgroup version. Could lead to
                  boot loop.
                - Cleanup reboot state files if /tmp is on ordinary filesystem.

    2024.2.2.1 (Hot fixes for Premium Customers Only)
              - Important:
                 *  Selinux state has changed to disabled in CCA templates in the infrastructure repository, compare
                    ${CCA_REPO_DIR}/templates/infrastructure_template/environments/ \
                    ENVIRONMENT_NAME/group_vars/all/linux
                    with your local ENVIRONMENT_NAME linux file and add 'cca_selinux_state' to your local file.

              - Updating CCA to use ansible DNF module instead of yum module for the following OS versions.
                * RHEL 8 and 9
                * Rocky Linux 8 and 9

    2024.2.2
              - Important:
                 *  Selinux state has changed in CCA templates in the infrastructure repository, compare
                    ${CCA_REPO_DIR}/templates/infrastructure_template/environments/ENVIRONMENT_NAME/group_vars/all/linux
                    with your local ENVIRONMENT_NAME linux file and add 'cca_selinux_state' to your local file.
              - Updating CCA to use ansible DNF module instead of yum module for the following OS versions.
                * RHEL 8 and 9
                * Rocky Linux 8 and 9
              - Simplified firewall configuration variables in linux vars file, added documentation
                to main.yml in cca.core.linux
              - Added retries on cluster bundle push from Deployer.
              - Updated TimeoutStopSec in systemd service for Splunkd to a value that resolves
                issues with rolling upgrade of Search Head Cluster where captaincy election was
                interrupted. Rerun configure_linux_servers.yml playbook towards all servers to update
                the setting.
              - Updated exclude paths for onboarding rsync_options with Splunks new DS apps folders.
                Copy
                templates/onboarding_template/environments/ENVIRONMENT_NAME/group_vars/all/onboarding
                to your own environment folder in the onboarding repo.
              - Enabled checkmode in configure_linux_servers.yml playbook.
              - New handlers for service restart due to configuration change.
              - Renamed variables in Splunkd.service file to handle deprecated linux terms.
              - Added wait for host connection in configure_linux_servers.yml playbook.

              Bug fixes:
                - Corrected calculation for retry and delay to correctly handle integers.
                - Corrected issue with server reboot stability and cgroups service.
                - Corrected standalone restart handler for Onboarding logic of Deploy Apps.
                - Corrected state variable name for running kernel cgroup version. Could lead to
                  boot loop.
                - Cleanup reboot state files if /tmp is on ordinary filesystem.


    2024.2.1  - Playbook deploy_deployment_apps.yml supports selective reload of Serverclass. Use reload_serverclass
                argument to control serverclass reload instead of full reload of deployment server.
              - Reworked and improved reload/restart handler for Deployment Servers and tasks to synchronize
                apps.
              - Bumped Splunk Enterprise version to 9.1.5, Splunk 9.1.x track is still recommended for production usage.
              - Added option to configure inputs certificate on forwarders to support intermediate forwarding.
              - Refactored linux firewall tasks and variables to allow for better control.
              - Add installation of chrony to re enable crontab support on newer distributions.
              - Base setup of Monitoring Console.
              - CCA Ansible Callback is available in preview, currently being worked on and feedback is
                appreciated. See callback_plugins/CCA_SPLUNK_CALLBACK.md for details.
              - Streamlined notify handlers to avoid multiple runs in the same playbook.

    2024.1.2
              - Important notice - Breaking change:

                * In previous versions, the CCA infrastructure repository was identified using the shorthand 'infra'.
                  As our needs have evolved, this naming convention no longer scales effectively. Starting with this
                  release, we have renamed all shorthand references of 'infra' to 'infrastructure' to more accurately
                  reflect its purpose. This change affects both the repository identifier and variable names within
                  the system.

                * Important for End Users:
                  If you have a local copy of the infrastructure repository that was created before version 2024.1.2,
                  you will need to update your repository settings. This ensures compatibility with the new naming
                  conventions. Additionally, an issue with the incorrect repository name labeled 'CcaRepo' has been
                  been corrected in this release. Some variables has changed from strict validation identified with
                  UPDATE_* to use OPTIONAL_* instead, corrected for some non-critical variables in this release.
                  Please make sure your settings are updated to align with the changes described below:

                      ${CCA_INFRASTRUCTURE_DIR}/.storage/settings
                        cca_infrastructure_storage_settings_file_version="2024.1.2"
                        repo_type=infrastructure
                        CcaRepo=cca_for_splunk

                      ${CCA_INFRASTRUCTURE_DIR}/environments/ENVIRONMENT_NAME/group_vars/all/env_specific
                        absolute_infrastructure_repo_path: '{{ inventory_dir }}/../..'
                        cca_infrastructure_lock_wait_sec: 1800
                        cca_splunk_license_manager_uri: 'https://OPTIONAL_LICENSE_MANAGER_FQDN:8089'
                        cca_splunk_alert_action_smtp: 'OPTIONAL_SMTP_SERVER_FQDN'
                        cca_splunk_health_alert_action_email_to: 'OPTIONAL_ALERT_EMAIL_ADDRESS'
                        cca_splunk_extension_certs_path: '{{ absolute_infrastructure_repo_path }}/splunk/etc/auth/certs'
                        cca_splunk_extension_licenses_path: '{{ absolute_infrastructure_repo_path }}/splunk/etc/licenses/enterprise'

              - Setup wizard has been updated to be much faster while copying template files.
              - Handling of splunk_conf_[general|group|host]_settings has been simplified and custom filter_plugins has
                been developed to further strengthen the validation in the cca.core.splunk role.
              - Bumped Splunk Enterprise version to 9.1.4, Splunk 9.1.x track is still recommended for production usage.
              - Updated the cca.splunk.onboarding role to accommodate scenarios where a deployment server coexists with
                other Splunk roles. To deploy deployment-apps to a server not listed in the [deployment_servers] inventory
                group. Configure the additional option dest_dir: 'deployment-apps' in group_vars for your Ansible group.
                Use the standard playbook deploy_apps.yml for this scenario.

              Bug fixes:
              - Fixed issue that initialize task would not run if inventory group was missing.

    2024.1.1
              - Important:
                  * If you are running on Linux Kernel 5.8 or later, execute the 'configure_linux_server.yml'
                    playbook on all Splunk servers to install and configure the included
                    'cca_cgroup_version_daemon'. This is a systemd service that takes care of re-enabling
                    support for cgroup v1. In the event that the Kernel is updated to a version requiring
                    the switch to cgroup v2, 'the Splunkd.service' may fail to start after a reboot.
                  * For the initial installation of Splunk using CCA, there are no additional steps to
                    be performed.
              - Bumped Splunk Enterprise version to 9.1.3, Splunk 9.1 track is recommended for production
                usage.
              - Added script to ease download of supported Splunk Enterprise versions.
                ${CCA_REPO_DIR}/roles/cca.splunk.enterprise-install/files/bin/download_splunk_enterprise.sh
                Tgz files are downloaded and stored in ${CCA_INFRASTRUCTURE_DIR}/splunk/var/images/
              - Updated conditions that rely on ansible groups so inventory can be made smaller and
                unused groups can be removed from the inventory.
              - Improved handling of cluster bundle validation errors. Fail task only on critical
                errors.
              - Changed static retries for splunk commands. They are all having default values and
                are configurable with custom tuning values on global, group or host level.
                List of configurable variables:
                  * cca_splunk_bootstrap_shcluster_captain_retries
                  * cca_splunk_cluster_bundle_status_retries
                  * cca_splunk_finalize_upgrade_retries
                  * cca_splunk_kvstore_backup_status_retries
                  * cca_splunk_kvstore_status_retries
                  * cca_splunk_login_retries
                  * cca_splunkd_restart_retries
                  * cca_splunkd_start_retries
                  * cca_splunkd_status_retries
              - Improved logic to store staging apps during deployment, related to data onboarding.
              - Improved detection filter in rsync to avoid false positives during deployment-apps
                deployment.
              - Refactoring cca.splunk.ssl-certificates tasks to better detect certificate update
                needs.
              - Updated prerequisites running CCA on Manager server
                  * Updated python version to 3.11.3+, install a new venv, update .profile_local
                    with new venv path.
                  * Updated ansible version to 2.14.13, install new ansible version in venv and
                    all included modules.
                  * Removed support for Amazon Linux 2 for CCA Manager due to ansible and python
                    dependency incompatibility.
              - Python Packages installed by the setup wizard, verify that older installations has
                them installed.
                   pip install ansible-runner pcrypt cryptography jmespath Jinja2 requests urllib3
              - Added cleanup files for installation of Splunk Enterprise versions, 8.10, 8.11.2,
                8.12,9.08 and 9.1.3.
              - Updated forwarders template to enable Http Event Collector via
                etc/system/local/inputs.conf
              - Updated the rolling update playbook to handle Linux kernels with no standard
                cgroupv1 support, including latest kernel updates for Fedora and RHEL 9.
              - Added a cca_cgroup_version_daemon to make sure cgroupv1 is available even if host
                has been updated manually without CCA. Run configure_linux_server playbook to
                create and enable it.

              Bug fixes:
                * Corrected splunkd restart and reload deploy-server handler that caused both
                  a splunkd restart and reload deploy-server during the same change.
                * Corrected an issue with incorrect clean up of staging directories for app
                  onboarding on CCA manager server.

        2023.3.2

              - Standard Data Onboarding is a steamlined and simplified version of CCA Onboarding
                and are now available in the open source version.
                *  All onboarding apps needs to be placed in splunk/etc/apps/selectable or
                    splunk/etc/apps/versioned directories.
                *  Onboarding group_vars files has been simplified, uses sections for selected_apps
                    and versioned_apps only. Updated template files are available in
                    templates/onboarding_template/environments/ENVIRONMENT_NAME/group_vars.
                *  Directories in onboarding repo for splunk/etc/manager-apps,
                    splunk/etc/deployment-apps and splunk/etc/shcluster/apps are no longer used in
                    standard data onboarding and can safely be removed if available in a onboarding
                    repo.
              - Added requirement to have community.crypto module install. Install via
                ansible-galaxy collection install community.crypto
              - Added option to skip the check if splunkd is started. To fix fatal errors it can
                be necessary to skip health check and update conf files first. Use this
                as extra-vars ensure_splunkd_started as false.
              - To ease usage of CCA for Splunk, data onboarding has been simplified and this release
                starts with preparing tasks and playbooks for next step where Standard Onboarding
                are default in CCA for Splunk.
              - Refactor tasks for cca.splunk.ssl-certificates role.
              - Updated supported OS versions to include Debian(12) and Ubuntu(22) with support for
                grub and polkit.
              - Updated supported OS versions to include OracleLinux 8 and 9.


        2023.3.1

            - Added cleanup function for unused Splunk tgz files during Splunk Enterprise
              installation.
            - New task for setting up NTP
            - Added support for Amazon 2023 Dnf Updates with releasever. If unset the latest
              available version is detected and used. Hosts inventory file supports setting on
              group or host level. Set dnf_releasever="VERSION_NAME" to pin a specific update
              release.
            - Bumped soft ulimits for open files to 128000 and hard ulimits to 256000, run
              configure_linux_servers.yml playbook to apply updates and reboot the servers.
              Split playbook hosts in sections by choice, to avoid that restarts happens on
              all servers at the same time.
            - Bumped recommended Splunk Enterprise Version to 9.0.6.
            - Added support for Splunk 9.1.x.
            - Added support for RHEL, CentOS and Rocky Linux version 9.
            - Restructured README for easier readability.
            - Updated documentation and tasks to use legacy Ansible Galaxy.

            Bug fixes:
              * Corrected handling of inputs, outputs and server certificates when
                using selfsigned certificates.
              * Deploy playbooks didn't deploy standard apps on search head deployers
                and cluster managers.

        2023.2.2
            - Bumped recommended Splunk Enterprise Version to 9.0.5.
            - Monitoring console needs to have the shcluster_label set for search head members,
              added shcluster_label to group_vars file for searchhead_members_shcluster_c*
            - Improved description on playbook tasks
            - Combined deployment-apps and apps deployment in deploy_deployment_apps.yml
              playbook.
            - Added restart trigger in manage_searchhead_clusters.yml playbook.
            - Better support for local user handling.
            - CCA Manager setup now add aliases for infra and onboarding repos. See alias in
              roles/cca.setup.cca-manager/tasks/post_configure_cca_manager_user.yml

            Bug fixes:
              * Corrected hosts groups in deploy_apps.yml playbook.
              * Changed to package variable in check_for_os_updates.yml
              * Corrected general typos in text and variables.


        2023.2.1
            - Support for Amazon Linux 2023, cgroupv1 is enforced for systemd services.
            - Modified handling of Systemd templates that is dependent on cgroups v1. Splunk
              supports only cgroupv1 and if cgroupv2 is discovered on a supported system, then
              it's reconfigured to use the legacy version.
            - Updated splunk .profile to store bash history when muliple terminals are used in parallel.
            - Automation readiness playbook and documentation updates.
            - Improved error messages in data onboarding deployments.
            - Changed onboarding main task to use playbook vars to decide what to deploy where.
            - Improved first SSH connection attempt, handles initial initialization of SSH and wait
              for existance of loaded SSH keys.

            Bug fixes:
              * Corrected build script for cca_ctrl to output relevant error for missing paths
                and avoid checking of path when cca_ctrl is launched within a main repo.
              * Corrected data type of index "_configtracker" from metrics index to event index
              * Unset LS_COLORS to respect terminal colors set by user profile.
              * Fixed checkbox list in cca_ctrl that now limit hosts to 21 rows and then show
                scrollbar.


        2023.1.1
             - Bumped recommended Splunk Enterprise Version to 9.0.4.
             - Splunk Enterprise 9 support
                 * Upgrade Playbook handles SHC kvstore migration and upgrade. New variable
                   shc_upgrade_kvstore_engine to control the update.
                 * Updated group_vars files to handle cluster config bundle directory differences
                   between Splunk Enterprise 8 and 9 by introducing a dynamic variable.
                   (cluster_manager_config_bundle_dir)
                 * manage_index_clusters.yml playbook will prompt for migration of master-apps
                   to manager-apps at first run on Splunk Enterprise 9
                 * onboarding repo needs updates, deploy_manager_apps.yml will inform what to do.
                 * Extra condition added to group files to change master_uri to manager_uri for
                   license stanza in server.conf.
                 * CCA customer file version check, assert that critical files are up to date.
                 * Moved settings for config_change_tracker to general_settings and made it
                   conditional for Splunk 9+ as the previous setting config_change_audit is
                   deprecated.
                 * Verify that all SHC servers has the same version.
                 * Introduced a group_vars/all/defaults variable to control kvstore engine version.
                   (cca_splunk_kvstore_engine_version)
                 * Adding settings to manage new index _configtracker.
                 * Removed legacy settings for config_change_audit that is deprecated by Splunk.
                 * Splunk Enterprise EULA
                   roles/cca.splunk.enterprise-install/files/dat/splunk-license-eula.txt
                 * Improved availability validation of Splunk Enterprise tgz file before installation.
             - This release comes with important updates to group_vars files, to get a list of
               files that needs to be updated a new task and playbook has been developed.
               The validate_cca_parameters.yml playbook only runs in Ansible check mode.
               ./cca_ctrl -c Select validate_cca_infrastructure_parameters.yml playbook,
               run and review the result.
             - Bias names change in CCA, master directory changed to main to reflect default
               git branch name. All tasks names with master changed to manager.
             - Setup cca manager playbook and roles are reworked to support Docker Container
               images.
             - Setup wizard no longer require Splunk binaries to generate password, secrets or
               encrypted password hashes.
                 * pip pcrypt is required to generate Splunk secrets.
             - Setup wizard can be re-run to update singular stored secrets and passwords.
             - Major lint update to playbooks.
                 * Moved ansible managed tasks from post_tasks to enterprise install.
                 * Added any_errors_fatal to all playbooks to abort execution when an issue
                   or validation didn't pass.
             - Automated certificate renewal implemented, triggers when
               cca_splunk_cert_enrollment_method is set to manual and the checksum differs
               for a certificate or key file between manager and Splunk server. Validating
               private key and securing proper EOL in cert and key files.
             - Added assert to give a helpful message if private key decryption fail during
               manual certificate deployment.
             - Added assert to give a helpful message when a default_tcpout variable is
               misconfigured in the inventory hosts file.
             - Improved assert message when detecting app removals during onboarding deployment.
             - New tasks to handle pre and post configuration of CCA Manager user.
             - Included more patterns to detect missing and required variables before deploying
               settings in Splunk.
             - General ansible lint and spelling corrections.
             - Firewall configuration on Splunk servers, default disabled. Controlled by settings
               in group_vars/all/linux (configure_firewall)
             - Onboarding directories names for cluster and shcluster are now aligned with
               cluster_label and shcluster_label. Enables descriptive labels that allows correlation
               between inventory hosts files, onboarding repo and Monitoring Console.
             - General updates to README files.
             - Restricted playbook failure detecting to break on fatal errors. Ease troubleshooting and
               stability by halting when an errors is discovered instead of continuing with other hosts
               in the same play.
             - Tuned playbook to suppress changes notification where it makes sense. A playbook should
               returned all OK if nothing was changed on the host.
             - Tasks for deploy_deployment_apps now handles deployment server reload.
             - Role: cca.core.control
                * Included csv file with latest versions of onboarding and infrastructure template
                  files.

              Bug fixes:
                  * Corrected variable name in search head cluster member logic
                  * Moved state file for ansible managed server to enterprise installation task.
                  * Corrected option name for deployment_servers, option disabled. Perform a manual
                    of the template file if upgrading to this framework version.
                  * Corrected pass4SymmKey reference in searchhead_members_shcluster_c2. Manual
                    update of group_vars file are required.
                  * Corrected playbooks with better error handling and task description.
                  * Added missing reload_deployment_server tasks for deployment apps onboarding
                  * Corrected group_vars for deployment_servers where serverName and pass4SymmKey
                    was incorrectly set in the servervclass.conf section instead of server.conf.
                    Incorrect values needs to be set to absent to be removed by CCA.
                  * Changed regex_search to 'value' in output to reduce Ansible warnings.
                  * Corrected condition when to wait for a new cluster bundle to be ready.
                  * Corrected path in cca_manager setup wizard.


        2022.3.2
             - Recommended Splunk Enterprise version updated to 8.2.9 for production use.
               Added new diff file for Splunk enterprise 8.2.9.
             - Added catch function to stop playbook when an value contains 'UPDATE'. Those
               parameters needs to be updated prior to running cca_ctrl.
             - Improved handling of invalid_config_regex to skip checks if an option is
               set to be 'absent'
             - Updated git lfs to cover spl and tgz files.
             - Ansible lint updates and spelling improvement.
             - Update to group_vars files with general section where it was missing.
             - Update to group_vars files with master license section where it was missing.
             - Bumped version for modified group_vars files.


              Bug fixes:
                  * Updated checks in automation readiness playbook to better handle validation
                    logic and produce a correct value. automation_readiness.md file updated with
                    new scores.
                  * Corrected display variable for environment in setup wizard.
                  * Corrected search head cluster checks
                  * Lookup file needed to be written out in check_mode
                  * Changed UPDATE_ALTERNATE_FQDN to ALTERNATE_FQDN to avoid it being caught by the
                    invalid_config_regex filter.
                  * Improved problem detection when ansible vault trows errors during setup_wizard
                  * Corrected path for staging directory in onboarding playbook for deployment-apps.
                    Incorrectly identified deleted deployment-apps.
                  * Ignore .gitignore file in default rsync options for data onboarding.
                  * Cleanup inventory hosts file and removed incorrect settings.


    2022.3.1 - CCA can handle parallel execution of playbooks and wait until a playbook
               has been completed until a new one starts. .../group_vars/env_specific are
               updated with new control parameters. Default disabled.
                  parallel_execution_control: false
                  parallel_execution_control_timeout: '60' (Minutes)
             - Recommended Splunk Enterprise version updated to 8.2.8 for production use.
             - CCA Manager setup is now supported by a dedicated role and playbook, see main
               README.md file for instruction.
             - CCA can check for new versions of your template files at execution start,
               activate by setting {"validate_cca_infrastructure_files": true} in env_specific file.
               ( Beta function )
             - File version added to onboarding and infrastructure template files.
             - Added a unique cca_runid in cca_ctrl as an extra-vars to be used in the future.
             - Updated automation readiness score to match performed checks.
             - Ansible lint updates.
             - Updated main README and automation_readiness guide.
             - Converted .storage/settings to proper ini_file format for other tools to parse it.
             - Clarify where to write out random vault password sting.
             - Bumped version on changed files to 2022.3.1.
             - Included control variables to include licensed CCA features.
             - Updated names of onboarding apps and variables in README file for
               cca.splunk.onboarding to match new structure.
             - Added option to convert extracted apps directories to versioned apps.
               build_appFile_from_splunk_app.sh
             - Many updates has been done in the template files. Start by adding all files in
               your local CCA infrastructure and onboarding repo to git. Then check file contents
               against cca_for_splunk/templates files and update where needed.


               Bug fixes:
                  * Updated splunk_login.yml task to handle forced splunkd restart. Useful when
                    a config error that prevented splunkd to start has been fixed but splunkd
                    restart has not been triggered.
                  * Corrected onboarding variable names in cca.splunk.onboarding tasks.
                  * Corrected searchhead_deployer_shcluster_c* in templates/infrastructure_template/
                    environments/ENVIRONMENT_NAME/group_vars. Please update your local files with the updates.
                  * Corrected variables in setup_wizard to work with proper ENV variables and limited
                    tmpfs space.
                  * Corrected the wizard that runs via `cca_ctrl --setup` as it didn't generate random
                    password for the c2 to c8 index and search head cluster. Re-run the setup to
                    produce new random pass4SymmKeys.
                  * Updated env variables to not quote stings for paths as it prevented shell expansions.
                  * Fixed scroll text option in cca_ctrl playbook selection.
                  * Added `connection: local` when `delegate_to: localhost` is used on the manager server as that
                    connection is for localhost.
                  * Changed instruction to store splunk binaries for setup_wizard in /var/tmp/
                  * Corrected logic in manage_searchhead_clusters.yml that prevented SH Cluster C2-> to run.
                  * Changed variables to track multiple Search Head Cluster captain init status during
                    cluster bootstrap.
                  * Corrected static repo type reference in cca_ctrl host list function.


    2022.2.4 - CCA is now supporting Rocky Linux 8, automation_readiness_cca_manager.yml is
               updated with the new OS support.
             - Added ansible_python_interpreter=/usr/bin/python3 variable to hosts file in
               ansible inventory.
             - Updated template hosts file with availability groups that now covers all index
               and search head clusters. Copy template files or update your hosts file manually.
             - Added splunk_volume_path_hot and splunk_volume_path_cold to
               cluster_peers_cluster_c* where they were missing.
             - Initial work to get CCA for Splunk to run on Mac OSX. Setup Wizard can run on
               a Mac. cca.splunk.enterprise-install/tasks/ensure_splunk_version.yml updated
               to work with Linux and Darwin Splunk Enterprise binaries.
             - cca_ctrl is updated to detect Darwin OS and require that 'gsed' is installed.
             - CCA Splunk secrets is now a one-line variable with ansible-vault. Updates can
               now be done, full wizard run is required. Specific updates can be supported.
             - Updated versions where deployment server can be enabled. Splunk has backported
               the fix for svd-2022-0608 to Splunk Enterprise 8.2.6.1 and 8.2.7.
             - Reformatted EXTRA_VARS so they will be presented as a column list instead of
               long string.


             Bug fixes:
                * Changed to linear strategy in configure_linux_servers.yml playbook.
                * Removed splunk start from manage_searchhead_clusters.yml. Caused race
                  condition on a earlier initial startup task. Seen on high performance
                  servers.
                * Updated roles/*/meta/main.yml to correct meta information that was missing.
                * Renamed variable for rolling peer restart retries, new variable is
                  cluster_peer_rolling_restart_preflight_retries.
                * Removed manual prompt of rolling restart verification in
                  cca.core.splunk/tasks/cluster_peers_rolling_restart.yml
                * Added check and wait function so that a Search Head Cluster rolling restart
                  can complete if it's in progress when the playbooks runs.
                  cca.splunk.role-searchhead/tasks/splunk_login.yml updated with extended
                  retry to wait for a Search Head Member to start up, might be in a rolling
                  restart phase.
                * Updated cca.splunk.onboarding/README.md to match directory structure
                  in data onboarding repo.
                * cca_ctrl - fix scroll function to be able to read release notes in the UI.
                * Increased timeout for initial start of Splunk from 120 to 180 seconds to
                  handle lab environments with lower specs.
                * General correction of spelling errors.

    2022.2.3 Set current Splunk Enterprise version so that group_vars files can use it.
             Updated deployment_server group_vars file, if current Splunk Enterprise
             version is below 9.0.0, disable deployment server functionallity.

             Bug fixes:
                * Corrected splunk_conf_group_settings variable in
                  templates/infrastructure_template/environments/ENVIRONMENT_NAME/group_vars/
                  for
                     all_in_one_servers
	             data_collection_nodes
	             deployment_servers
	             forwarders
	             hybrid_searchheads
                  Important: Copy these files to your environments/ENVIRONMENT_NAME/group_vars
                             folder if you have already run the setup. If not, you don't need to
                             do anything.

    2022.2.2 Playbooks to manage Splunk Enterprise upgrades and CVE info
             Splunk Deployment Servers with a versions earlier than 9.0 has
             the following CVE-2022-32158, CVSSv3.1 Score: 9.0, Critical
             https://www.splunk.com/en_us/product-security/announcements/svd-2022-0608.html

             To upgrade just the Splunk Deployment Servers, add an explicit version in the
             hosts inventory file.
             [deployment_servers:vars]
             splunk_enterprise_version='9.0.0'

             Store the tgz file in the infrastructure repo at splunk/var/images.

             Run ./cca_ctrl and select the playbook upgrade_non_clustered_splunk_servers.yml
             and target only the Deployment Servers. Perform the upgrade in a test environment
             before doing so in Production.

             Playbooks added:
                rolling_upgrade_splunk_clusters.yml
                upgrade_non_clustered_splunk_servers.yml

             Bug fixes:
                * Corrected path for splunk in task ensure_splunk_version.yml
                * Removed manifest files from diff cleanup files, manifest files
                  are a great source of information to get insight on the historical
                  upgrade path of an Splunk Server
                * Shorten menu description for configure_linux_servers.yml

    2022.2.1 Initial Open Source release of CCA for Splunk
             Framework roles for Splunk infrastructure management
                cca.core.control
                cca.splunk.enterprise-install
                cca.splunk.ssl-certificates
                cca.splunk.frontend
                cca.core.splunk
                cca.splunk.role-searchhead
                cca.core.linux
                cca.common.setup-wizard

            Playbooks for Splunk infrastructure management
                manage_all_in_one_servers.yml
                manage_data_collection_nodes.yml
                manage_deployment_servers.yml
                manage_forwarders.yml
                manage_hybrid_searchheads.yml
                manage_index_clusters.yml
                manage_license_managers.yml
                manage_monitoring_consoles.yml
                manage_searchhead_clusters.yml
                manage_standalone_indexers.yml

            Framework roles for Splunk onboarding of configuration and artifacts
                cca.splunk.onboarding

            Playbooks for Splunk onboarding of configuration and artifacts
                deploy_apps.yml
                deploy_deployment_apps.yml
                deploy_fullstack.yml
                deploy_master_apps.yml
                deploy_shcluster_apps.yml

            Playbooks for cca setup
                automation_readiness_cca_manager.yml
                setup_wizard.yml

            Template structure for custom configuration and artifacts
                infrastructure_template
                onboarding_template
